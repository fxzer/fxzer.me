<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="author" content="fxzer"><meta http-equiv="X-UA-Compatible" content="chrome=1"><meta name="revisit-after" content="7 days"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="shortcut icon" href="/fxzer.me/favicon.png"><meta name="msapplication-TileColor" content="#ffffff"><title>Git常用操作</title><script>!function(){var e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,t=localStorage.getItem("vueuse-color-scheme")||"auto";("dark"===t||e&&"light"!==t)&&document.documentElement.classList.toggle("dark",!0)}()</script><script type="module" crossorigin="" src="/fxzer.me/assets/app-DTi_cOkI.js"></script><link rel="stylesheet" crossorigin="" href="/fxzer.me/assets/app-BRqP-3Dn.css"><link rel="modulepreload" crossorigin="" href="/fxzer.me/assets/Git常用操作-B5lZBzsj.js"><meta property="og:title" content="Git常用操作"><meta name="twitter:title" content="Git常用操作"></head><body class="font-sans text-gray-700 dark:text-gray-200 relative"><div id="app" data-server-rendered="true"><!--[--><header class="my-3 flex items-center px-4 h-12 justify-around z-40"><a href="/fxzer.me/" class="w-12 h-12 select-none outline-none" focusable="false"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" text-black="" dark:text-white=""><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="4"><path stroke-dasharray="24" stroke-dashoffset="24" d="M17 4L15 4C12.5 4 11 5.5 11 8V20"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.4s" values="24;0"></animate></path><path stroke-dasharray="12" stroke-dashoffset="12" d="M8 12H15"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.5s" dur="0.2s" values="12;0"></animate></path></g></svg></a><nav class="flex gap-4 md:gap-10"><!--[--><a href="/fxzer.me/posts" class="router-link-active font-semibold" title="item.title"><div class="i-ri-article-line"></div>博客</a><a href="/fxzer.me/projects" class="op80" title="item.title"><div class="i-codicon:github-project scale-105"></div>项目</a><!--]--></nav><div class="flex gap-4"><!--[--><a href="https://github.com/fxzer" title="link.title"><div class="i-simple-icons:github"></div></a><a href="https://gitee.com/fxzer" title="link.title"><div class="i-simple-icons:gitee"></div></a><!--]--><a class="select-none cursor-pointer" title="切换主题"><div i-ri-sun-line="" dark:i-ri-moon-line=""></div></a></div></header><main class="px-7 py-10 of-x-hidden"><!--[--><!----><div class="prose m-auto mb-8"><h1 class="mb-0 slide-enter-50">Git常用操作</h1><p class="opacity-50 !-mt-6 slide-enter-50">2023-06-30 <span>· 2min</span></p><!----><!----><!----></div><article class=""><!--[--><div class="prose m-auto slide-enter-content"><h2 id="拉取最新提交" tabindex="-1">拉取最新提交 <a class="header-anchor" href="#拉取最新提交" aria-hidden="true">#</a></h2><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-zsh"><span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">  git</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> fetch</span><span style="--s-dark:#C99076;--s-light:#A65E2B"> -p</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  #或 git fetch -p origin</span></span></code></pre><p><code>git fetch -p</code> （或者 <code>--prune</code>）命令用于从远程仓库中拉取最新的提交记录，同时也会删除 <em>本地不存在的远程分支</em>；不会更新本地分支和远程分支之间的关联关系，需要手动执行 <code>git merge</code> 或 <code>git rebase</code> 命令，或者使用 <code>git pull</code> 命令。例：删除远程 <code>dev</code>分支后，使用此命令，本地的远程分支也会被清理。</p><p><code>git fetch</code> 命令用于将远程仓库中的最新提交记录拉取到本地仓库中，但是不会自动合并（merge）这些提交；不会删除本地不存在的远程分支，可能会导致本地分支列表过长，不便于管理。</p><h2 id="删除远程分支" tabindex="-1">删除远程分支 <a class="header-anchor" href="#删除远程分支" aria-hidden="true">#</a></h2><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-zsh"><span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">git</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> branch</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> /</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> git</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> branch</span><span style="--s-dark:#C99076;--s-light:#A65E2B"> -r</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0">        #列出所有本地/远程分支</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">git</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> branch</span><span style="--s-dark:#C99076;--s-light:#A65E2B"> -D</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> 分支名</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0">              #删除本地库分支</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">git</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> push</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> origin</span><span style="--s-dark:#C99076;--s-light:#A65E2B"> --delete</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> 分支名</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0">   #删除远程库分支</span></span></code></pre><h2 id="删除tag" tabindex="-1">删除Tag <a class="header-anchor" href="#删除tag" aria-hidden="true">#</a></h2><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-zsh"><span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">git</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> tag</span><span style="--s-dark:#C99076;--s-light:#A65E2B"> -l</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0">                       #列出所有本地/远程tag</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">git</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> tag</span><span style="--s-dark:#C99076;--s-light:#A65E2B"> -D</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> tag名</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0">                 #删除本地库tag</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">git</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> push</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> origin</span><span style="--s-dark:#C99076;--s-light:#A65E2B"> --delete</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> tag名</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0">   #删除远程库tag</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">git</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> tag</span><span style="--s-dark:#C99076;--s-light:#A65E2B"> -l</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> |</span><span style="--s-dark:#80A665;--s-light:#59873A"> xargs</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> git</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> tag</span><span style="--s-dark:#C99076;--s-light:#A65E2B"> -d</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0">   #删除本地所有 tag</span></span></code></pre><h2 id="删除添加到暂存区的文件" tabindex="-1">删除添加到暂存区的文件 <a class="header-anchor" href="#删除添加到暂存区的文件" aria-hidden="true">#</a></h2><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-zsh"><span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">git</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> rm</span><span style="--s-dark:#C99076;--s-light:#A65E2B"> -r</span><span style="--s-dark:#C99076;--s-light:#A65E2B"> -n</span><span style="--s-dark:#C99076;--s-light:#A65E2B"> --cached</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> 文件/文件夹名称</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0">   #预览要删除的文件列表</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">git</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> rm</span><span style="--s-dark:#C99076;--s-light:#A65E2B"> -r</span><span style="--s-dark:#C99076;--s-light:#A65E2B"> --cached</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> 文件/文件夹名称</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0">      #确定无误后删除文件</span></span></code></pre><h2 id="删除本地仓库文件" tabindex="-1">删除本地仓库文件 <a class="header-anchor" href="#删除本地仓库文件" aria-hidden="true">#</a></h2><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-zsh"><span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">git</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> reset</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> HEAD^1</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  #上一个提交的所有文件回退到工作区， 处于未添加到暂存库状态</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">git</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> reset</span><span style="--s-dark:#C99076;--s-light:#A65E2B"> --hard</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> HEAD^1</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  #回退到上一个版本:最新一次提交的所有内容都被删除，本地文件也不存在</span></span></code></pre><h2 id="删除远程库文件" tabindex="-1">删除远程库文件 <a class="header-anchor" href="#删除远程库文件" aria-hidden="true">#</a></h2><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-zsh"><span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">git</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> push</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> origin</span><span style="--s-dark:#C99076;--s-light:#A65E2B"> --delete</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> node_modules</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  #git push &lt;远程仓库名称&gt; --delete &lt;文件路径&gt;</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">git</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> ls-remote</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  #确认文件是否成功删除</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">git</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> rebase</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0"> #变更历史记录</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">git</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> remote</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> prune</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> origin</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  # git remote prune &lt;远程仓库名称&gt; : 处理远程仓库中已删除文件的缓存</span></span></code></pre><h2 id="fork后的仓库，拉取合并原仓库的更新" tabindex="-1">fork后的仓库，拉取合并原仓库的更新 <a class="header-anchor" href="#fork后的仓库，拉取合并原仓库的更新" aria-hidden="true">#</a></h2><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-zsh"><span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">git</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> remote</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> add</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> upstream</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34"> [原仓库URL] </span><span style="--s-dark:#758575DD;--s-light:#A0ADA0">#添加上游分支路径</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">git</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> pull</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> upstream</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34"> [分支名]          </span><span style="--s-dark:#758575DD;--s-light:#A0ADA0">#拉取上游分支更新并合并</span></span></code></pre><h2 id="合并多次提交" tabindex="-1">合并多次提交 <a class="header-anchor" href="#合并多次提交" aria-hidden="true">#</a></h2><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-zsh"><span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">git</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> rebase</span><span style="--s-dark:#C99076;--s-light:#A65E2B"> -i</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> HEAD~3</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0">        #合并最近的 3 次提交，并开启交互模式</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">git</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> rebase</span><span style="--s-dark:#C99076;--s-light:#A65E2B"> -i</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> &lt;</span><span style="--s-dark:#C98A7D;--s-light:#B56959">commit_sh</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34">a</span><span style="--s-dark:#CB7676;--s-light:#AB5959">&gt;</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  #开启交互模式</span></span></code></pre><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-zsh"><span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">git</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> rebase</span><span style="--s-dark:#C99076;--s-light:#A65E2B"> -i</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> 8fc6389</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0">   #填第2 次提交的 hash，则表示合并 2 之后（3和 4）的提交</span></span></code></pre><p><img src="https://zerdocs.oss-cn-shanghai.aliyuncs.com/febasis/202302272058564.png" alt="image-20230227205854474"></p><p>把需要压缩的提交 <code>pick</code> 改为 <code>s</code>，必须保留一个 <code>pick</code>，下一步填写合并提交信息，保存退出(<code>:wq</code>)完成合并</p><p><img src="https://zerdocs.oss-cn-shanghai.aliyuncs.com/febasis/202302271055952.png" alt="image-20230227105523929"></p><p><img src="https://zerdocs.oss-cn-shanghai.aliyuncs.com/febasis/202302272059457.png" alt="image-20230227205916425"></p><h2 id="关联多个代码托管平台" tabindex="-1">关联多个代码托管平台 <a class="header-anchor" href="#关联多个代码托管平台" aria-hidden="true">#</a></h2><blockquote><p>当本地仓库项同时关联 github 和 gitee，同步更新两边代码</p></blockquote><ol><li><strong>方法一</strong> <code>git remote add gitee [gitee_repo_url]</code>，需要多次推送</li></ol><p>效果：</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-zsh"><span class="line"><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34">branch </span><span style="--s-dark:#C98A7D99;--s-light:#B5695999">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">master</span><span style="--s-dark:#C98A7D99;--s-light:#B5695999">"</span><span style="--s-dark:#666666;--s-light:#999999">]</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">  remote</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> =</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> origin</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">  merge</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> =</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> refs/heads/master</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34">remote </span><span style="--s-dark:#C98A7D99;--s-light:#B5695999">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">origin</span><span style="--s-dark:#C98A7D99;--s-light:#B5695999">"</span><span style="--s-dark:#666666;--s-light:#999999">]</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">  url</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> =</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> git@github.com:fxzer/juejin-server-mysql.git</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">  fetch</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> =</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> +refs/heads/</span><span style="--s-dark:#C99076;--s-light:#A65E2B">*</span><span style="--s-dark:#C98A7D;--s-light:#B56959">:refs/remotes/origin/</span><span style="--s-dark:#C99076;--s-light:#A65E2B">*</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34">remote </span><span style="--s-dark:#C98A7D99;--s-light:#B5695999">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">gitee</span><span style="--s-dark:#C98A7D99;--s-light:#B5695999">"</span><span style="--s-dark:#666666;--s-light:#999999">]</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">  url</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> =</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> git@gitee.com:fxzer/juejin-server-mysql.git</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">  fetch</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> =</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> +refs/heads/</span><span style="--s-dark:#C99076;--s-light:#A65E2B">*</span><span style="--s-dark:#C98A7D;--s-light:#B56959">:refs/remotes/gitee/</span><span style="--s-dark:#C99076;--s-light:#A65E2B">*</span></span></code></pre><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-zsh"><span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">#git remote -v</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">gitee</span><span style="--s-dark:#C98A7D;--s-light:#B56959">   git@gitee.com:fxzer/juejin-server-mysql.git</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34"> (fetch)</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">gitee</span><span style="--s-dark:#C98A7D;--s-light:#B56959">   git@gitee.com:fxzer/juejin-server-mysql.git</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34"> (push)</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">origin</span><span style="--s-dark:#C98A7D;--s-light:#B56959">  git@github.com:fxzer/juejin-server-mysql.git</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34"> (fetch)</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">origin</span><span style="--s-dark:#C98A7D;--s-light:#B56959">  git@github.com:fxzer/juejin-server-mysql.git</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34"> (push)</span></span></code></pre><ol start="2"><li><strong>方法二</strong> <code>git remote set-url --add origin [gitee_repo_url]</code> , 只需一次推送</li></ol><p>效果：</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-zsh"><span class="line"><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34">remote </span><span style="--s-dark:#C98A7D99;--s-light:#B5695999">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">origin</span><span style="--s-dark:#C98A7D99;--s-light:#B5695999">"</span><span style="--s-dark:#666666;--s-light:#999999">]</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">  url</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> =</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> git@github.com:fxzer/json-viewer.git</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">  fetch</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> =</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> +refs/heads/</span><span style="--s-dark:#C99076;--s-light:#A65E2B">*</span><span style="--s-dark:#C98A7D;--s-light:#B56959">:refs/remotes/origin/</span><span style="--s-dark:#C99076;--s-light:#A65E2B">*</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">  url</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> =</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> git@gitee.com:fxzer/json-viewer.git</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34">branch </span><span style="--s-dark:#C98A7D99;--s-light:#B5695999">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">master</span><span style="--s-dark:#C98A7D99;--s-light:#B5695999">"</span><span style="--s-dark:#666666;--s-light:#999999">]</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">  remote</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> =</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> origin</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">  merge</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> =</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> refs/heads/master</span></span></code></pre><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-zsh"><span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">#git remote -v</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">origin</span><span style="--s-dark:#C98A7D;--s-light:#B56959">  git@github.com:fxzer/json-viewer.git</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34"> (fetch)</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">origin</span><span style="--s-dark:#C98A7D;--s-light:#B56959">  git@github.com:fxzer/json-viewer.git</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34"> (push)</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">origin</span><span style="--s-dark:#C98A7D;--s-light:#B56959">  git@gitee.com:fxzer/json-viewer.git</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34"> (push)</span></span></code></pre><p>::: tip <code>git remote add</code> 和 <code>git remote set-url --add</code>区别</p><ul><li><p>git remote add 用于添加一个新的远程仓库。该本地仓库已关联远程库，希望添加新的远程库。</p><p><strong>运用</strong>：fork后的仓库，需要拉取合并原仓库的更新。</p></li><li><p>git remote set-url --add 用于向已经存在的远程仓库中添加一个新的 URL。</p><p><strong>运用</strong>：同一个仓库关联 github 和 gitee 方便同时更新。</p></li><li><p>git remote set-url 命令会替换掉原有的链接，<code>git remote set-url --add</code> 则是添加一个标识对应的远程库链接。</p></li></ul><p>:::</p><h2 id="改错分支但为未提交" tabindex="-1">改错分支但为未提交 <a class="header-anchor" href="#改错分支但为未提交" aria-hidden="true">#</a></h2><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-zsh"><span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">git</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> stash</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0">            #暂存更改到stash</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">git</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> checkout</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> 分支名</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0">   #切换分支</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">git</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> stash</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> pop</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0">        #从stash中取出暂存的代码修改</span></span></code></pre><h2 id="提交完未推送前，需要再次提交" tabindex="-1">提交完未推送前，需要再次提交 <a class="header-anchor" href="#提交完未推送前，需要再次提交" aria-hidden="true">#</a></h2><ul><li>提交完未推送前，发现代码有的有点小问题，还需要修改再提交，但是不想新增垃圾提交信息，保持简洁。</li><li>只需要修改提交的内容而不需要改变提交信息， 可以使用 --no-edit 参数来跳过编辑提交信息的步骤。</li></ul><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-zsh"><span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">git</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> commit</span><span style="--s-dark:#C99076;--s-light:#A65E2B"> --amend</span><span style="--s-dark:#C99076;--s-light:#A65E2B"> --no-edit</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0"> # 做的修改合并到最近的提交中，相当于是在原有的提交上进行修改，而不是创建一个新的提交。</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0"># 使用后在拉取代码会出现：位于分支 master</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0"># 您的分支和 'origin/master' 出现了偏离，</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0"># 并且分别有 1 和 1 处不同的提交。</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">#   （使用 "git pull" 来合并远程分支）</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A"> git</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> config</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> pull.rebase</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> true</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0">   # git pull前，需要执行此命令进行变基</span></span></code></pre><h2 id="修改第一次提交信息" tabindex="-1">修改第一次提交信息 <a class="header-anchor" href="#修改第一次提交信息" aria-hidden="true">#</a></h2><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-zsh"><span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">git</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> rebase</span><span style="--s-dark:#C99076;--s-light:#A65E2B"> -i</span><span style="--s-dark:#C99076;--s-light:#A65E2B"> --root</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  #把第一次提交的 pick 改为 edit 后 e</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">git</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> rebase</span><span style="--s-dark:#C99076;--s-light:#A65E2B"> --continue</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">git</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> rebase</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> pull.rebase</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> true</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">git</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> pull</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">git</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> push</span></span>
<span class="line"></span></code></pre><h2 id="代码提交到了错误的分支" tabindex="-1">代码提交到了错误的分支 <a class="header-anchor" href="#代码提交到了错误的分支" aria-hidden="true">#</a></h2><h3 id="方法一" tabindex="-1">方法一 <a class="header-anchor" href="#方法一" aria-hidden="true">#</a></h3><p>切换到正确的分支并使用， 将指定的提交复制到当前分支，并将其添加到暂存区</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-zsh"><span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">git</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> cherry-pick</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34"> [commit]</span></span></code></pre><h3 id="方法二" tabindex="-1">方法二 <a class="header-anchor" href="#方法二" aria-hidden="true">#</a></h3><p>使用 <code>git rebase</code> 命令将提交移动到正确的分支上：</p><ol><li>切换到错误分支上：<code>git checkout [error-branch]</code></li><li>将错误分支上的提交移动到正确分支上：<code>git rebase [correct-branch]</code></li><li>解决冲突（如果有）</li><li>将更改提交到正确的分支上：<code>git checkout [correct-branch]</code>，然后 <code>git merge [error-branch]</code></li><li>在错误分支<code>git push -f</code>更新远程代码</li></ol><h2 id="git-提交规范化" tabindex="-1">Git 提交规范化 <a class="header-anchor" href="#git-提交规范化" aria-hidden="true">#</a></h2><ul><li><strong>husky</strong>: Git 钩子工具,在 Git 提交过程的不同阶段自动运行脚本，以此来实现对代码的验证、格式化、测试等操作</li><li><strong>@commitlint/cli</strong>: 提交信息校验脚手架</li><li><strong>@commitlint/config-conventional</strong>: 定义了 commitlint 默认使用的规范。</li><li><strong>commitizen</strong>: 交互式提交工具</li><li><strong>conventional-changelog</strong>: 规范提交信息、并自动生成变更日志</li><li><strong>cz-conventional-changelog</strong>: git cz 提交规范和 changelog 生成工具</li></ul><h3 id="husky-文档" tabindex="-1"><a href="https://typicode.github.io/husky" target="_blank" rel="noopener">husky</a> <a href="https://typicode.github.io/husky/getting-started.html" target="_blank" rel="noopener">文档</a> <a class="header-anchor" href="#husky-文档" aria-hidden="true">#</a></h3><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-zsh"><span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0"># 安装</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">pnpm</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> dlx</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> husky-init</span><span style="--s-dark:#666666;--s-light:#999999"> &amp;&amp;</span><span style="--s-dark:#80A665;--s-light:#59873A"> pnpm</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> install</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0"># 初始化husky配置，在根目录新增.husky配置文件。初始化配置pre-commit</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0"># 新增一个提交git commit 执行前的钩子（commit-msg）</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">npx</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> husky</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> add</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> .husky/commit-msg</span></span>
<span class="line"></span></code></pre><h4 id="注意：需要-git-init后才能初始化，否则报错如下" tabindex="-1">注意：需要 <code>git init</code>后才能初始化，否则报错如下 <a class="header-anchor" href="#注意：需要-git-init后才能初始化，否则报错如下" aria-hidden="true">#</a></h4><p><img src="https://zerdocs.oss-cn-shanghai.aliyuncs.com/interview/2023-06-27-20-25-35.png" alt="2023-06-27-20-25-35"></p><h3 id="commitlint-cli与-commitlint-config-conventional" tabindex="-1">@commitlint/cli与@commitlint/config-conventional <a class="header-anchor" href="#commitlint-cli与-commitlint-config-conventional" aria-hidden="true">#</a></h3><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-zsh"><span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">#安装校验脚手架、校验规范</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">pnpm</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> i</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> @commitlint/cli</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> @commitlint/config-conventional</span><span style="--s-dark:#C99076;--s-light:#A65E2B"> -D</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">#添加安装脚本呢</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">pnpm</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> set-script</span><span style="--s-dark:#C98A7D99;--s-light:#B5695999"> '</span><span style="--s-dark:#C98A7D;--s-light:#B56959">"prepare": "husky install"</span><span style="--s-dark:#C98A7D99;--s-light:#B5695999">'</span></span></code></pre><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-js"><span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">// commitlint.config.js （若报错 type:'module'）可改：commitlint.config.js ==&gt; commitlint.config.cjs</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418">module</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#B8A965;--s-light:#998418">exports</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418">  extends</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#666666;--s-light:#999999"> [</span><span style="--s-dark:#C98A7D99;--s-light:#B5695999">'</span><span style="--s-dark:#C98A7D;--s-light:#B56959">@commitlint/config-conventional</span><span style="--s-dark:#C98A7D99;--s-light:#B5695999">'</span><span style="--s-dark:#666666;--s-light:#999999">],</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><h3 id="commitizen" tabindex="-1"><a href="http://commitizen.github.io/cz-cli/" target="_blank" rel="noopener">commitizen</a> <a class="header-anchor" href="#commitizen" aria-hidden="true">#</a></h3><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-zsh"><span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">#全局安装</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">npm</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> install</span><span style="--s-dark:#C99076;--s-light:#A65E2B"> -g</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> commitizen</span></span></code></pre><h3 id="cz-conventional-changelog" tabindex="-1">cz-conventional-changelog <a class="header-anchor" href="#cz-conventional-changelog" aria-hidden="true">#</a></h3><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-zsh"><span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">#全局安装</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">npm</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> install</span><span style="--s-dark:#C99076;--s-light:#A65E2B"> -g</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> cz-conventional-changelog</span></span></code></pre><p>配置 <code>~/.czrc</code>， 将其设置为 <code>commitizen</code> 的插件。</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-zsh"><span class="line"><span style="--s-dark:#666666;--s-light:#999999">{</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">  "path"</span><span style="--s-dark:#B8A965;--s-light:#998418">:</span><span style="--s-dark:#C98A7D99;--s-light:#B5695999"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">cz-conventional-changelog</span><span style="--s-dark:#C98A7D99;--s-light:#B5695999">"</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><p>:::tip 作用：提交代码并生成变更日志 使用 <code>commitizen</code> 提交代码时，会自动启动 <code>cz-conventional-changelog</code> 插件，</p><p>并根据 <code>conventional-commit</code> 规范提示用户输入提交信息。</p><p>输入完毕后，会自动将提交信息转换成符合规范的格式，并将其写入到 <code>CHANGELOG.md</code> 文件中。 :::</p><h2 id="浅克隆-github-仓库，push-到-gitee-仓库" tabindex="-1">浅克隆 github 仓库，push 到 gitee 仓库 <a class="header-anchor" href="#浅克隆-github-仓库，push-到-gitee-仓库" aria-hidden="true">#</a></h2><p>:::danger 报错：</p><blockquote><p><code>! [remote rejected] main -&gt; main (shallow update not allowed)</code> :::</p></blockquote><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-zsh"><span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">git</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> fetch</span><span style="--s-dark:#C99076;--s-light:#A65E2B"> --unshallow</span><span style="--s-dark:#C98A7D;--s-light:#B56959"> origin</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  # 取消浅克隆，拉取完整的仓库</span></span></code></pre><h2 id="git-module" tabindex="-1">Git Module <a class="header-anchor" href="#git-module" aria-hidden="true">#</a></h2><p>拉取依赖其他模块的项目时，需要初始化子模块，下列两种方式均可：</p><ol><li><code>git clone --recursive https://github.com/xxx/yyy.git</code></li><li><code>git clone https://github.com/xxx/yyy.git</code>，<code>git submodule update --init --recursive</code></li></ol></div><!--]--></article><div class="prose m-auto mt-8 mb-8 slide-enter animate-delay-500 print:hidden"><br><span font-mono="" op50="">&gt; </span><a href="/fxzer.me/posts" class="router-link-active font-mono op50 hover:op75">cd ..</a></div><!--]--><div class="mt-10 mb-6 prose m-auto flex slide-enter animate-delay-1200!"><span class="text-sm op50"><a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" style="color:inherit">CC BY-NC-SA 4.0</a> 2024-PRESENT © fxzer</span><div class="flex-auto"></div></div></main><!----><button title="Scroll to top" fixed="" right-3="" bottom-3="" w-10="" h-10="" hover:op100="" rounded-full="" hover-bg-hex-8883="" transition="" duration-300="" z-100="" print:hidden="" class="hidden"><div i-ri-arrow-up-line=""></div></button><!--]--></div></body></html>